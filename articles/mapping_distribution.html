<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="expowo">
<title>Mapping global distribution for any genus • expowo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mapping global distribution for any genus">
<meta property="og:description" content="expowo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">expowo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/mapping_distribution.html">Mapping global distribution for any genus</a>
    <a class="dropdown-item" href="../articles/mining_accepted_genera.html">Mining genus list for any plant family</a>
    <a class="dropdown-item" href="../articles/mining_accepted_species.html">Mining species list for any plant family</a>
    <a class="dropdown-item" href="../articles/mining_family_species_number.html">Mining species number of any plant family</a>
    <a class="dropdown-item" href="../articles/mining_megadiverse_genera.html">Mining megadiverse genera of flowering plants</a>
    <a class="dropdown-item" href="../articles/mining_species_distribution.html">Mining distribution for any plant species</a>
    <a class="dropdown-item" href="../articles/mining_toptenrichest_genera.html">Mining the top ten richest genera of flowering plants</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DBOSlab/expowo/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="mapping_distribution_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Mapping global distribution for any genus</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DBOSlab/expowo/blob/HEAD/vignettes/articles/mapping_distribution.Rmd" class="external-link"><code>vignettes/articles/mapping_distribution.Rmd</code></a></small>
      <div class="d-none name"><code>mapping_distribution.Rmd</code></div>
    </div>

    
    
<p>The main goal of the <strong>expowo</strong> package is to retrieve information about the diversity and distribution of any plant family as publicly available at the taxonomically verified database <a href="https://powo.science.kew.org" class="external-link">Plants of the World Online (POWO)</a>.<br></p>
<p>The package is intended to efficiently mine the content within the source HTML pages for any specific genus and family. It can return a comma-separated values (CSV) file with the number of accepted species and country-level distribution for any genus as well as the full checklist of accepted species in any genus or family, their authorship, original publication and global distribution.<br></p>
<p>Here in this article, we show how to use the package’s function <code>powoMap</code> for mapping the global distribution for any genus of flowering plants either at political country or botanical country level. The <code>powoMap</code> uses the argument <code>data</code> to set the input data, which has to be a data frame originated from <code>powoSpecies</code> function. Then, this function create global distribution maps to each genus provided in the previous search results, colored according to species richness using either <a href="https://CRAN.R-project.org/package=viridis" class="external-link">Viridis</a> color paletts or <a href="https://CRAN.R-project.org/package=RColorBrewer" class="external-link">RColorBrewer</a>.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p><strong>expowo</strong> is not on CRAN yet but you can install the latest development version from <a href="https://github.com/" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"DBOSlab/expowo"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dboslab.github.io/expowo/">expowo</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mining-species-distribution-from-powo-to-use-as-input-data-in-powomap">1. Mining species distribution from POWO to use as input data in powoMap<a class="anchor" aria-label="anchor" href="#mining-species-distribution-from-powo-to-use-as-input-data-in-powomap"></a>
</h2>
<p>To create global distribution maps, first we need to extract the data. To do so, we use the package function <code>powoSpecies</code> to return a data frame listing the entire global distribution at country or botanical level for any species of the given family. It is also possible to adjust one of the arguments in <code>powoSpecies</code> function to extract data only from a genus or list of genera.<br></p>
<p>The example below shows how to mine the distribution for Lecythidaceae family with genus constriction. It means that the function will search for Bertholletia genus within this family and their associated data. Note that we create an object called <code>mapspdist</code> to be used in the next step as input to create the maps. The output shown here (a table) is simplified by removing some columns and display the data for only one species (<em>B. excelsa</em>).<br></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/taxize/" class="external-link">taxize</a></span><span class="op">)</span></span>
<span><span class="va">fam</span> <span class="op">&lt;-</span> <span class="st">"Lecythidaceae"</span></span>
<span><span class="va">powocodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">fam</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu">taxize</span><span class="fu">::</span><span class="fu">get_pow</span><span class="op">(</span><span class="va">fam</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mapspdist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/powoSpecies.html">powoSpecies</a></span><span class="op">(</span><span class="va">powocodes</span><span class="op">$</span><span class="va">family</span>, <span class="va">powocodes</span><span class="op">$</span><span class="va">uri</span>,</span>
<span>                         hybridspp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         country <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                         genus <span class="op">=</span> <span class="st">"Bertholletia"</span>,</span>
<span>                         verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         save <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         dir <span class="op">=</span> <span class="st">"results_powoSpecies/"</span>,</span>
<span>                         filename <span class="op">=</span> <span class="st">"Lecythidaceae_Bertholletia"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>TABLE 1. A general <code>powoSpecies</code> search for mining distribution for <em>Bertholletia</em>, a Lecythidaceae genus.</caption>
<colgroup>
<col width="6%">
<col width="10%">
<col width="34%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th align="center">genus</th>
<th align="center">taxon_name</th>
<th align="center">native_to_country</th>
<th align="center">native_to_botanical_countries</th>
</tr></thead>
<tbody><tr class="odd">
<td align="center">Bertholletia</td>
<td align="center">Bertholletia excelsa</td>
<td align="center">Bolivia, Brazil, Colombia, French Guiana, Guyana, Suriname, Venezuela</td>
<td align="center">Bolivia, Brazil North, Brazil West-Central, Colombia, French Guiana, Guyana, Suriname, Venezuela</td>
</tr></tbody>
</table>
</div>
<div class="section level2">
<h2 id="creating-global-scale-map-divided-by-political-country-for-one-genus">2. Creating global-scale map divided by political country for one genus<a class="anchor" aria-label="anchor" href="#creating-global-scale-map-divided-by-political-country-for-one-genus"></a>
</h2>
<p>As generated in the example above, one of the columns from the <code>mapspdist</code> object related to the global distribution by political countries of <em>Bertholletia</em> will be used in <code>map_div</code> argument inside <code>powoMap</code> function. The columns selected is “native_to_country”, associated to political country.<br></p>
<p>The example below shows how to create a global distribution map according to political division of the World (see argument <code>map_div</code>), colored by species richness using Viridis package (see argument <code>vir_color</code> set up with one scale colors called viridis and the argumten <code>bre_color</code>set up as ).<br></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">powoMap</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapspdist</span>,</span>
<span>        botctrs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        map_div <span class="op">=</span> <span class="st">"native_to_country"</span>,</span>
<span>        multigen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        vir_color <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>        bre_color <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        leg_title <span class="op">=</span> <span class="st">"SR"</span>,</span>
<span>        dpi <span class="op">=</span> <span class="fl">600</span>,</span>
<span>        dir <span class="op">=</span> <span class="st">"results_powoMap/"</span>,</span>
<span>        filename <span class="op">=</span> <span class="st">"global_richness_country_map"</span>,</span>
<span>        format <span class="op">=</span> <span class="st">"jpg"</span><span class="op">)</span> </span></code></pre></div>
<p><br><img src="reference/figures/global_richness_country_map_SR_Bertholletia_viridis.jpg" style="width:30.0%"></p>
</div>
<div class="section level2">
<h2 id="creating-global-scale-map-divided-by-botanical-country-for-one-genus">3. Creating global-scale map divided by botanical country for one genus<a class="anchor" aria-label="anchor" href="#creating-global-scale-map-divided-by-botanical-country-for-one-genus"></a>
</h2>
<p>As shown in the first topic of this article, one of the columns from the <code>mapspdist</code> object related to distribution of <em>Bertholletia</em> will be used in <code>map_div</code> argument inside <code>powoMap</code> function. In this topic, the aim is to show the distribution according to botanical subdivision of the world (“native_to_botanical_countries” column).<br></p>
<p>The example below show how to create a global distribution map according to botanical subdivision of the World (see argument <code>map_div</code>), colored by species richness using Viridis package (see argument <code>vir_color</code> set up with one scale colors called viridis and the argumten <code>bre_color</code>set up as ).<br></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">botdivmap</span><span class="op">)</span></span>
<span><span class="fu">powoMap</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mapspdist</span>,</span>
<span>        botctrs <span class="op">=</span> <span class="va">botdivmap</span>,</span>
<span>        map_div <span class="op">=</span> <span class="st">"native_to_botanical_countries"</span>,</span>
<span>        multigen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        vir_color <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>        bre_color <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        leg_title <span class="op">=</span> <span class="st">"SR"</span>,</span>
<span>        dpi <span class="op">=</span> <span class="fl">600</span>,</span>
<span>        dir <span class="op">=</span> <span class="st">"results_powoMap/"</span>,</span>
<span>        filename <span class="op">=</span> <span class="st">"global_richness_botcountry_map"</span>,</span>
<span>        format <span class="op">=</span> <span class="st">"jpg"</span><span class="op">)</span></span></code></pre></div>
<p><br><img src="reference/figures/global_richness_botcountry_map_SR_Bertholletia_viridis.jpg" style="width:30.0%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Debora Zuanny, Domingos Cardoso.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
